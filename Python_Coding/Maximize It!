from itertools import product
if __name__ == '__main__':
    k, n = [int(x) for x in input().split()]
    l = []
    for _ in range(k):
        l.append([int(x) for x in input().split()[1:]])
    maxi = 0
    for i in product(*l):
        s = sum([j * j for j in i]) % n
        maxi = max(maxi,s)
    print(maxi)
